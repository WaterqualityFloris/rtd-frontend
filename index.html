<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>RTD Simulator</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
        button { margin: 10px; padding: 10px 20px; font-size: 16px; }
    </style>
</head>
<body>

    <h1>Residence Time Simulator</h1>

    <select id="topoSelect">
        <option value="flat">Flat</option>
        <option value="hill">Hill</option>
        <option value="valley">Valley</option>
    </select>
    <br><br>
    <button onclick="runSimulation()">Run Simulation</button>

    <h2 id="resultTitle"></h2>
    <p id="resultText"></p>

    <script>
        async function runSimulation() {
            const topoType = document.getElementById('topoSelect').value;

            document.getElementById('resultTitle').innerText = "Running simulation... ⏳";

            const response = await fetch('https://rtd-simulator-backend-production.up.railway.app/run_simulation/', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ topo_type: topoType })
            });

            const data = await response.json();

            if (data.status === "success") {
                document.getElementById('resultTitle').innerText = "Simulation Complete! ✅";
                document.getElementById('resultText').innerHTML = `
                    Mean Elevation: ${data.mean_elevation} m<br>
                    Estimated RTD: ${data.fake_rtd_value} units
                `;
            } else {
                document.getElementById('resultTitle').innerText = "Error!";
                document.getElementById('resultText').innerText = data.error;
            }
        }
    </script>

</body>
</html>

